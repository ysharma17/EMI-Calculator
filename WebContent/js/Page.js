
/************************************
* Developed by Illimar Pihlamäe		*
* e-mail: illimar@idra.pri.ee		*
* Euroland Estonia © 2012			*
* e-mail: illimar@euroland.com		*
*************************************/

var Page={loadCall:null,isWebcat:false,hasFade:true,load:function(){var browser,appVer,obj,index,temp=document,fps=24;browser=navigator.userAgent;Page.browser=document.all ? 'IE':(browser.search('Firefox')>-1 ? 'FireFox':(browser.search('Opera')>-1 ? 'Opera':(browser.search('Chrome')>-1 ? 'Chrome':(browser.search('iPad')>-1 ? 'iPad':(browser.search('iPhone')>-1 ? 'iPhone':(browser.search('Safari')>-1 ? 'Safari':'?'))))));if(browser.search("Windows")>-1)Page.op="win";else if(browser.search("Macintosh")>-1)Page.op="mac";switch(Page.browser){case "IE":{index=browser.search('MSIE');if(index==-1)break;appVer=browser.substring(index+4,browser.indexOf(';',index));appVer=Math.floor(parseFloat(appVer));if(appVer==6)Page.IE6=true;if(appVer < 9)Page.IE7_8=true;if(appVer > 8)Page.IE9=true;if(appVer < 8)Page.IE6_7=true;	if(document.documentElement.ie8_attributes){if(typeof document.documentElement.ie8_attributes.ie8_length=='number')Page.isIE8=true;if(typeof document.documentElement.ie8_attributes.ie9_length=='number')Page.isIE9=true;}if(typeof document.documentMode=='number'){Page.isIE8_9=true;}}break;case "Opera":break;case 'iPad':case 'iPhone':Page.hasFade=false;default:break;}obj=document.getElementsByTagName("HTML")[0];obj.className=Page.browser;if(Page.IE9)obj.className+=' IE9';if(Page.IE7_8)obj.className+=' IE7_8';if(Page.IE6)obj.className+=' IE6';if(typeof Graphics._fps=='number')Graphics.fps(Graphics._fps > 0 ? Graphics._fps:fps);	else	Graphics.fps(fps);	if(typeof Page.loadCall=="function")Page.loadCall();Graphics._frame();},http:function(){var xmlHttp=null;try{ xmlHttp=new XMLHttpRequest();}catch(e){ try{xmlHttp=new ActiveXObject("Msxml2.XMLHTTP");}catch(e){xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");}}return xmlHttp;},getData:function(strFile,variables,call,isPost,strID,errorCount,errorCall,isStatic){if(typeof Page.file!='string'&&typeof strFile!='string'){alert('ERROR! - No file has been set!');return;}if(typeof call!='function'){alert('ERROR! - The [call] is not set properly');return;}var http=new Page.http();if(http==null){if(typeof Page.httpErrorCall=="function")Page.httpErrorCall();return;}if(typeof errorCount!='number')errorCount=0;if(typeof isPost!='boolean')isPost=false;if(typeof variables!='string')variables=null;if(typeof strID!='string')strID=null;if(typeof errorCall!='function')errorCall=null;if(typeof isStatic!='boolean')isStatic=false;if(typeof Page.file=='string'&&typeof strFile!='string')strFile=Page.file;var url=strFile;if(isStatic){if(typeof variables=='string'){if(variables.length)url+="?"+variables;}}else{url+="?sid="+Math.random();if(typeof variables=='string'){if(variables.length)url+="&"+variables;}}http.open(isPost ? 'POST':'GET',url,true);if(isPost){http.setRequestHeader("Content-type","application/x-www-form-urlencoded");}http.onreadystatechange=function(){if(http.readyState==4||http.readyState=="complete"){if(http.status==200){if(typeof strID=='string'){document.getElementById(strID).innerHTML=http.responseText;call(strID);}else{call(http.responseText);}return;}else{errorCount++;if(errorCount < Page.errorRetryAmmount){Page.getData(strFile,variables,call,isPost,strID,errorCount,errorCall,isStatic);return;}if(typeof errorCall=='function'){errorCall(http,errorCount);return;}if(typeof Page.httsStatusErrorCall=='function'){errorCount++;Page.httsStatusErrorCall(http,errorCount);}else{alert("HTTP Status Returned: "+http.status);alert(http.responseText);}return;}}};http.send(isPost ? variables:null);},errorRetryAmmount:2,Head:null,JSON:{count:0},getJSON:function(url,params,loadCall){if(typeof loadCall!='function')return;if(Page.Head==null){Page.Head=document.getElementsByTagName("head")[0];}Page.JSON.count++;var obj=document.createElement('script'),nr=Page.JSON.count+0;Page.JSON['call_'+nr]=function(info){Page.JSON['data_'+nr]=info;};Page.JSON['obj_'+nr]=obj;if(params.length > 0){if(params.substr(0,1)=='?'){url+=params+'Page.JSON.call_'+nr;}else{url+='?'+params+'&callback=Page.JSON.call_'+nr;}}else{url+='?callback=Page.JSON.call_'+nr;}obj.type='text/javascript';obj.src=url;obj.charset='UTF-8';if(Page.IE7_8){obj.onreadystatechange=function(){if(this.readyState=='loaded'||this.readyState=='complete'){loadCall(Page.JSON['data_'+nr]);obj.onreadystatechange=null;delete Page.JSON['call_'+nr];delete Page.JSON['data_'+nr];Page.Head.removeChild(obj);}}}else{obj.onload=function(){loadCall(Page.JSON['data_'+nr]);obj.onload=null;delete Page.JSON['call_'+nr];delete Page.JSON['data_'+nr];Page.Head.removeChild(obj);};}Page.Head.appendChild(obj);},getWindowDimentions:function(){var ret=new Object();ret.width=0;ret.height=0;if(typeof(window.innerWidth)=='number'){	ret.width=window.innerWidth;ret.height=window.innerHeight;}else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){	ret.width=document.documentElement.clientWidth;ret.height=document.documentElement.clientHeight;}else if(document.body&&(document.body.clientWidth||document.body.clientHeight)){	ret.width=document.body.clientWidth;ret.height=document.body.clientHeight;}return ret;},httpErrorCall:null,httsStatusErrorCall:null,browser:null,op:"",IE6:false,IE7_8:false,IE9:false,IE6_7:false,isIE8_9:false};Page.DomainData={iframe:null,dataRetriverUrl:null,id:null,hasLoaded:false,getData:function(strFile,variables,call){if(!document.all||typeof Page.DomainData.dataRetriverUrl!='string'){Page.getData(strFile,variables,call);return;}if(Page.DomainData.iframe!=null){if(Page.DomainData.hasLoaded){window[Page.DomainData.id].getData(strFile,variables,call);}else	setTimeout(function(){Page.DomainData.getData(strFile,variables,call);},100);return;}Page.DomainData.id="PageDataRetriverIframe_"+Math.round(Math.random()*10000);Page.DomainData.iframe=document.createElement('iframe');Page.DomainData.iframe.id=Page.DomainData.id;Page.DomainData.iframe.name=Page.DomainData.id;Page.DomainData.iframe.style.height='0px';Page.DomainData.iframe.style.width='0px';Page.DomainData.iframe.style.border='0px';if(typeof Page.DomainData.iframe.onload=='object'){Page.DomainData.iframe.onload=function(){Page.DomainData.hasLoaded=true;window[Page.DomainData.id].getData(strFile,variables,call);};}else{Page.DomainData.iframe.onreadystatechange=function(){if(this.readyState=='loaded'||this.readyState=='complete'){Page.DomainData.hasLoaded=true;window[Page.DomainData.id].getData(strFile,variables,call);}};}Page.DomainData.iframe.src=Page.DomainData.dataRetriverUrl;document.body.appendChild(Page.DomainData.iframe);}};Page.httsStatusErrorCall=function(http){};